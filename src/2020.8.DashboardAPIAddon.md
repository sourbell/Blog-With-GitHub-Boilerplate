---
layout: post
title: Dashboard API Addon
slug: dashboard-api-addon
date: 2021-08-01 10:09
status: publish
author: Toby Bu
categories:
  - Project Manage
tags:
  - API
excerpt: Dashboard API
---

默认返回结构

``` javascript
{
    meta: {
        error: false,
        code: null,
        message: null
    },
    data: {
        ...
    }
}
```

1.

2.

3.

4.

5.

6.

7.

8.

9.

10.

11.

12.

13.

14. 创建 Challenge

    > PUT /dashboard/challenges

    ``` JSON
    {
        "challengeName": "Sample Challenge",
        "challengeType": "calories|iqPoints",
        "challengeScope": "",
        "workoutRange": [1200, 3600],
        "startDateTime": 1559829765,
        "endDateTime": 1564444800,
        "timezoneOffset": 8,
        "winningCriteria": "firstToTarget|mostWhenFinished",
        "criteriaTarget": 10000,
        "locations": [32, 34],
        "participants": [123,234]
    }
    ```

    1. challengeScope 可选项 club, location, private，默认值是 club，显示 Label 分别为 Club、Location 和 Private。
        1. 如果选择 club，俱乐部级别的 Challenge，无额外选项，；
        2. 如果选择 location，俱乐部 Location 级别的 Challenge。界面多出一个必选 selector，列出俱乐部下所有 Location list，可多选 locationId，传参名 locations；
        3. 如果选择 private，完全自定义参加者的 Challenge。界面多出一个必选 selector，列出俱乐部下所有 Member list，可多选 memberId，传参名也是 participants。
    2. workoutRange 为最低和最高时长，使用类似 [IONIC Range](https://ionicframework.com/docs/v3/api/components/range/Range/) 的组件实现，并在这个选项的下面加一行解释小字【Tip: workouts less than 1200 seconds will be ignored, workouts more than 3600 seconds will be cut.】
    3. startDateTime 开始时间必须大于当前时间，endDateTime 结束时间必须大于开始时间。
    4. winningCriteria 显示 Label 分别为 First To Target 和 Most When Finished。

15. 获取 Challenge 列表

    > POST /dashboard/challenges/page/{page:[0-]+}

    ``` JSON
    {
        "startTime": 0,
        "endTime": 1564444800,
        "challengeStatus": "pending|active|ended|deleted"
    }
    ```


16. 修改 Challenge

    > POST /dashboard/challenges/{challengeId:[0-]+}

    注：只有 Pending 的 Challenge 允许修改

17. 删除 Challenge

    > DELETE /dashboard/challenges/{challengeId:[0-]+}

    考虑把删除放在 Challenge 详情页，需要 Confirm

18. 获取 Challenge 详情

    > GET /dashboard/challenges/{challengeId:[0-9]+}

    ``` JSON
    {
        "challengeName": "Sample Challenge",
        "challengeType": "iqPoints",
        "challengeScope": "location",
        "workoutRange": [1200, 3600],
        "startDateTime": 1559829765,
        "endDateTime": 1564444800,
        "timezoneOffset": 8,
        "winningCriteria": "mostWhenFinished",
        "criteriaTarget": 0,
        "locations": [
            {
                "id": 1,
                "branchName": "TRIB3 Edinburgh",
                "branchLocation": "Edinburgh, Scotland",

            }
        ]
    }
    ```


19. 获取 Challenge Leaderboard

    > GET /dashboard/challenges/{challengeId:[0-9]+}/leaderboard
